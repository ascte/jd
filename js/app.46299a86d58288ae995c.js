webpackJsonp([1],{"0tEK":function(e,t){},"8/c5":function(e,t,n){"use strict";function o(e){n("hIox")}var a=n("cVso"),i=n("Wkx0"),s=n("VU/8"),l=o,u=s(a.a,i.a,!1,l,"data-v-41a4a2ac",null);t.a=u.exports},CYjI:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],i={render:o,staticRenderFns:a};t.a=i},M93x:function(e,t,n){"use strict";function o(e){n("NGHB")}var a=n("xJD8"),i=n("CYjI"),s=n("VU/8"),l=o,u=s(a.a,i.a,!1,l,null,null);t.a=u.exports},NGHB:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),a=n("zL8q"),i=n.n(a),s=n("tvR6"),l=(n.n(s),n("M93x")),u=n("YaEn"),r=n("mtWM"),c=n.n(r);o.default.config.productionTip=!1,o.default.prototype.$axios=c.a,o.default.use(i.a),new o.default({el:"#app",router:u.a,template:"<App/>",components:{App:l.a}})},NNlu:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("el-container",[n("el-header",[n("el-alert",{attrs:{title:"添加优惠券",type:"success",closable:!1}},[n("span",{staticClass:"mar-l-10"},[n("el-button",{staticClass:"mar-l-10",attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:e.oponNewCoupon}},[e._v("新增")])],1)])],1),e._v(" "),n("el-main",[n("div",{staticClass:"coupon_list"},[n("el-row",{attrs:{gutter:20}},e._l(e.couponList,function(t,o){return n("el-col",{key:o,attrs:{span:6}},[n("div",{staticClass:"grid-content bg-purple",attrs:{"data-url":t.coupon_url}},[e.isSend[o]?n("div",{staticClass:"fs14"},[n("iframe",{attrs:{src:"",frameborder:"0",id:"iframe"+o,width:"100%"}})]):[n("p",{domProps:{textContent:e._s(t.coupon_name)}}),e._v(" "),n("p",{staticClass:"time_tip",domProps:{textContent:e._s(t.coupon_time)}}),e._v(" "),n("p",{domProps:{textContent:e._s(t.coupon_remark)}})]],2),e._v(" "),n("el-row",{staticClass:"mar-t-10"},[n("el-col",{attrs:{span:24}},["public"===t.user_flag&&"public"!==e.$route.params.uuid?n("el-button",{attrs:{disabled:"true",type:"info"}},[e._v("不可编辑")]):[n("el-button",{attrs:{type:"primary"},on:{click:function(n){e.openEditCoupon(o,t)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:function(n){e.removeConpon(t)}}},[e._v("删除")])],e._v(" "),"aa1111"===e.$route.params.uuid&&"public"!==t.user_flag?n("el-button",{attrs:{type:"danger"},on:{click:function(n){e.setPublicConpon(t)}}},[e._v("置")]):e._e()],2)],1)],1)}))],1)]),e._v(" "),n("el-dialog",{attrs:{title:"添加优惠券",visible:e.dialogNewCoupon},on:{"update:visible":function(t){e.dialogNewCoupon=t}}},[n("el-form",{attrs:{model:e.newForm}},[n("el-form-item",{attrs:{label:"券名称"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.newForm.coupon_name,callback:function(t){e.$set(e.newForm,"coupon_name",t)},expression:"newForm.coupon_name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"券领取时间"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.newForm.coupon_time,callback:function(t){e.$set(e.newForm,"coupon_time",t)},expression:"newForm.coupon_time"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"券领取url"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:e.newForm.coupon_url,callback:function(t){e.$set(e.newForm,"coupon_url",t)},expression:"newForm.coupon_url"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"备注"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.newForm.coupon_remark,callback:function(t){e.$set(e.newForm,"coupon_remark",t)},expression:"newForm.coupon_remark"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogNewCoupon=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.addCoupon}},[e._v("确 定")])],1)],1)],1)],1)},a=[],i={render:o,staticRenderFns:a};t.a=i},Q5rI:function(e,t,n){"use strict";function o(e,t){var n="//node.woiyun.com/"+e;return l()({method:"post",timeout:15e3,url:n,data:t,transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t}]}).then(function(e){return i.a.resolve(e.data)})}t.a=o;var a=n("//Fk"),i=n.n(a),s=n("mtWM"),l=n.n(s)},Wkx0:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("el-container",[n("el-header",[n("el-alert",{attrs:{title:"请确定是否登录京东",type:"success",closable:!1}},[n("a",{staticClass:"mar-l-10",attrs:{target:"_blank",href:"https://home.m.jd.com/myJd/newhome.action"}},[n("el-button",{attrs:{type:"primary",round:"",size:"mini"}},[e._v("手机登录")])],1),e._v(" "),n("router-link",{attrs:{to:"/setCoupon/"+e.$route.params.uuid}},[n("el-button",{attrs:{type:"primary",round:"",size:"mini"}},[e._v("设置券")])],1),e._v(" "),n("span",{staticClass:"timeTxet hide",domProps:{textContent:e._s(e.timeText)}})],1)],1),e._v(" "),n("el-header",[n("el-alert",{attrs:{title:"选择请求间隔",type:"success",closable:!1}},[n("span",{staticClass:"mar-l-10"},[n("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:e.timeSpanValue,callback:function(t){e.timeSpanValue=t},expression:"timeSpanValue"}},e._l(e.timeSpans,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)])],1),e._v(" "),n("el-header",[n("el-alert",{attrs:{title:"选择定时任务启动",type:"success",closable:!1}},[n("span",{staticClass:"mar-l-10 select_time"},[n("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:e.timeTypeVlaue,callback:function(t){e.timeTypeVlaue=t},expression:"timeTypeVlaue"}},e._l(e.timeTypes,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),0!==e.timeTypeVlaue?[n("span",{staticClass:"mar-l-10 select_time"},[n("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:e.timeHourVlaue,callback:function(t){e.timeHourVlaue=t},expression:"timeHourVlaue"}},e._l(e.timeHours,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("span",{staticClass:"mar-l-10 select_time"},[n("el-select",{attrs:{disabled:"",size:"mini",placeholder:"请选择"},model:{value:e.timeMinuteVlaue,callback:function(t){e.timeMinuteVlaue=t},expression:"timeMinuteVlaue"}},e._l(e.timeMinutes,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("span",{staticClass:"mar-l-10 select_time"},[n("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:e.timeSecondVlaue,callback:function(t){e.timeSecondVlaue=t},expression:"timeSecondVlaue"}},e._l(e.timeSeconds,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)]:e._e(),e._v(" "),n("span",[e.isBatchStart?n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.batchStop}},[e._v("停止")]):n("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.batchStart}},[e._v("启动")])],1),e._v(" "),0!==e.timeTypeVlaue?n("span",{domProps:{textContent:e._s(e.runTimeText)}}):e._e(),e._v(" "),null!==e.taskTime&&0!==e.timeTypeVlaue?n("span",{staticClass:"cancel_task",on:{click:e.cancelTask}},[e._v("取消")]):e._e()],2)],1),e._v(" "),n("el-main",[n("div",{staticClass:"coupon_list mar-t-10"},[n("el-row",{attrs:{gutter:20}},[e._l(e.couponList,function(t,o){return n("el-col",{key:t._id,staticClass:"item",attrs:{span:6}},[n("div",{staticClass:"grid-content bg-purple",attrs:{"data-url":t.coupon_url},on:{click:function(n){e.selectCoupon(o,t)}}},[t.isSend?n("div",{staticClass:"fs14 hb100 overhide"},[n("iframe",{attrs:{src:"",frameborder:"0",id:"iframe"+o,width:"100%"}})]):[n("p",{domProps:{textContent:e._s(t.coupon_name)}},[e._v("京东超市198-100")]),e._v(" "),n("p",{staticClass:"time_tip",domProps:{textContent:e._s(t.coupon_time)}},[e._v("0,10,12,14点")]),e._v(" "),n("p",{staticClass:"fs16",domProps:{textContent:e._s(t.coupon_remark)}},[e._v("备注")])],e._v(" "),t.isSelect?n("i",{staticClass:"el-icon-success"}):e._e()],2),e._v(" "),n("el-row",{staticClass:"mar-t-10"},[n("el-col",{attrs:{span:24}},[t.isSend?n("el-button",{attrs:{type:"danger"},on:{click:function(n){e.oneReceive(o,t)}}},[e._v("停止")]):n("el-button",{attrs:{type:"primary"},on:{click:function(n){e.oneReceive(o,t)}}},[e._v("领取")])],1)],1)],1)}),e._v(" "),e.couponList.length<1?n("p",[e._v("暂无数据")]):e._e()],2)],1)])],1)],1)},a=[],i={render:o,staticRenderFns:a};t.a=i},YaEn:function(e,t,n){"use strict";var o=n("7+uW"),a=n("/ocq"),i=n("8/c5"),s=n("nquB");o.default.use(a.a),t.a=new a.a({mode:"hash",routes:[{path:"",redirect:"/receive/aa8888"},{path:"/receive/:uuid",name:"Index",component:i.a},{path:"/setCoupon/:uuid",name:"SetCoupon",component:s.a}]})},cVso:function(e,t,n){"use strict";var o=n("Q5rI");t.a={name:"Index",data:function(){return{interval:[],couponList:[],isSend:[],selectCouponList:[],timeSpanValue:500,timeTypeVlaue:0,timeHourVlaue:16,timeMinuteVlaue:59,timeSecondVlaue:50,isBatchStart:!1,timeText:"",taskTime:null,runTimeText:"",TimeNum:0,timeSpans:[{value:100,label:"100ms"},{value:200,label:"200ms"},{value:300,label:"300ms"},{value:400,label:"400ms"},{value:500,label:"500ms"},{value:600,label:"600ms"},{value:800,label:"800ms"},{value:1e3,label:"1000ms"},{value:1200,label:"1200ms"}],timeTypes:[{value:0,label:"立刻"},{value:1,label:"定时"}],timeHours:[{value:7,label:"07点"},{value:9,label:"09点"},{value:10,label:"10点"},{value:11,label:"11点"},{value:13,label:"13点"},{value:15,label:"15点"},{value:16,label:"16点"},{value:17,label:"17点"},{value:19,label:"19点"},{value:21,label:"21点"},{value:23,label:"23点"}],timeMinutes:[{value:59,label:"59分"}],timeSeconds:[{value:30,label:"30秒"},{value:40,label:"40秒"},{value:50,label:"50秒"},{value:55,label:"55秒"},{value:58,label:"58秒"}]}},created:function(){var e=this;e.getConpon(),window._Timer01=setInterval(function(){e.dateInit()},1e3)},methods:{cancelTask:function(){var e=this;e.taskTime=null,e.runTimeText=""},getConpon:function(){var e=this;Object(o.a)("coupon/getCoupon",{user_flag:this.$route.params.uuid}).then(function(t){if("00"==t.code){for(var n=0;n<e.couponList.length;n++)t.couponList[n].isSend=!1,t.couponList[n].isSelect=!1;e.couponList=t.couponList}})},dateInit:function(){var e=this;document.getElementsByClassName("timeTxet")[0].style.display="inline-block";var t=new Date;e.timeText="本机时间："+t.toLocaleString(),null===e.taskTime||e.isBatchStart||(e.runTimeText=parseInt((e.taskTime.getTime()-t.getTime())/1e3)+"秒后启动",t.getTime()>e.taskTime.getTime()&&(e.startTask(),e.isBatchStart=!0))},oneReceive:function(e,t){t.isSend?this.stopSend(e,t):this.requestSend(e,t)},requestSend:function(e,t){var n=this;this.selectCouponList.push(e),this.$set(t,"isSend",!0),this.isBatchStart=!0,n.interval[e]=setInterval(function(){window.frames["iframe"+e].src=t.coupon_url},n.timeSpanValue)},stopSend:function(e,t){console.log(e),this.$set(t,"isSend",!1),this.$set(t,"isSelect",!1),this.selectCouponList.pop(),this.selectCouponList.length<1&&(this.isBatchStart=!1),clearInterval(this.interval[e])},selectCoupon:function(e,t){if(t.isSelect){for(var n=0;n<this.selectCouponList.length;n++)if(this.selectCouponList[n]==e){this.selectCouponList.splice(n,1);break}this.$set(t,"isSelect",!1)}else this.selectCouponList.push(e),this.$set(t,"isSelect",!0)},batchStart:function(){var e=this,t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.timeHourVlaue,e.timeMinuteVlaue,e.timeSecondVlaue,0);if(this.selectCouponList.length<1)return void alert("请至少选择一个");0===this.timeTypeVlaue?e.taskTime=t:n.getTime()<t.getTime()?alert("定时时间不能小于当前时间"):e.taskTime=n},batchStop:function(){for(var e=this,t=e.selectCouponList.slice(0),n=0;n<t.length;n++)e.stopSend(t[n],e.couponList[t[n]]);e.isBatchStart=!1,e.taskTime=null,e.runTimeText=""},startTask:function(){var e=this,t=e.selectCouponList.slice(0);if(!this.isBatchStart){for(var n=0;n<t.length;n++)e.stopSend(t[n],e.couponList[t[n]]);for(var n=0;n<t.length;n++)this.requestSend(t[n],this.couponList[t[n]]);this.isBatchStart=!0}}},destroyed:function(){clearInterval(_Timer01)},watch:{$route:function(){window.location.reload()}}}},hIox:function(e,t){},nquB:function(e,t,n){"use strict";function o(e){n("0tEK")}var a=n("rOeS"),i=n("NNlu"),s=n("VU/8"),l=o,u=s(a.a,i.a,!1,l,"data-v-f58dafec",null);t.a=u.exports},rOeS:function(e,t,n){"use strict";var o=n("Q5rI");t.a={name:"setCoupon",data:function(){return{interval:[],couponList:"",isSend:[],dialogNewCoupon:!1,newForm:{coupon_name:"",coupon_time:"",coupon_url:"",coupon_remark:"",user_flag:this.$route.params.uuid}}},created:function(){this.getConpon()},methods:{getConpon:function(){var e=this;Object(o.a)("coupon/getCoupon",{user_flag:this.$route.params.uuid}).then(function(t){"00"==t.code&&(e.couponList=t.couponList)})},addCoupon:function(){var e=this;if(this.newForm._id)return this.editCoupon(),!1;Object(o.a)("coupon/addCoupon",this.newForm).then(function(t){(t.code="00")?(e.$message({message:"优惠券添加成功",type:"success"}),setTimeout(function(){window.location.reload()},1e3)):e.$message.error("系统错误")})},removeConpon:function(e){var t=this;Object(o.a)("coupon/removeCoupon",{id:e._id}).then(function(e){(e.code="00")&&(t.$message({message:"优惠券删除成功",type:"success"}),setTimeout(function(){window.location.reload()},1e3))})},setPublicConpon:function(e){var t=this;Object(o.a)("coupon/setPublicCoupon",{id:e._id}).then(function(e){(e.code="00")&&(t.$message({message:"设置成功",type:"success"}),setTimeout(function(){window.location.reload()},1e3))})},editCoupon:function(){var e=this;Object(o.a)("coupon/editCoupon",this.newForm).then(function(t){(t.code="00")&&(e.$message({message:"优惠券更新成功",type:"success"}),setTimeout(function(){window.location.reload()},1500))})},openEditCoupon:function(e,t){this.dialogNewCoupon=!0,this.newForm=t},oponNewCoupon:function(){this.dialogNewCoupon=!0,this.newForm={coupon_name:"",coupon_time:"",coupon_url:"",coupon_remark:"",user_flag:this.$route.params.uuid}}},beforeRouteLeave:function(e,t,n){console.log(33333),n()},watch:{$route:"getConpon"}}},tvR6:function(e,t){},xJD8:function(e,t,n){"use strict";t.a={name:"app"}}},["NHnr"]);
//# sourceMappingURL=app.46299a86d58288ae995c.js.map